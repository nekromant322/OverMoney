persistentVolumeClaim:
  requestsStorage: 10Gi

service:
  port: 9092
  targetPort: 9092

deployment:
  strategy:
    type: Recreate # Нужно из-за привязки PVC OneToOne - нет возможности законнектить одновременно две кафки, поэтому будет даунтайм
  replicas: 1
  containers:
    image: confluentinc/cp-kafka
    imageTag: 7.0.1
    containerPort: 9092
    env:
      - name: KAFKA_BROKER_ID
        value: "1"
      - name: KAFKA_ZOOKEEPER_CONNECT
        value: 'sa-zookeeper-svc:2181'
      - name: KAFKA_LISTENER_SECURITY_PROTOCOL_MAP
        value: PLAINTEXT:PLAINTEXT,PLAINTEXT_INTERNAL:PLAINTEXT
      - name: KAFKA_ADVERTISED_LISTENERS
        value: PLAINTEXT://:29092,PLAINTEXT_INTERNAL://sa-zookeeper-svc:9092
      - name: KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR
        value: "1"
      - name: KAFKA_TRANSACTION_STATE_LOG_MIN_ISR
        value: "1"
      - name: KAFKA_TRANSACTION_STATE_LOG_REPLICATION_FACTOR
        value: "1"
    volumeMountPath: /var/lib/kafka/logs
  priorityClassName: prod-priority-class